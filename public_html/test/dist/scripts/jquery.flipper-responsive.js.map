{"version":3,"sources":["scripts/jquery.flipper-responsive.js"],"names":["jQuery","$","String","prototype","repeat","count","this","TypeError","str","RangeError","Infinity","Math","floor","length","rpt","i","padStart","targetLength","padString","slice","fn","flipper","action","options","$flipper","settings","extend","reverse","data","datetime","template","labels","preload","console","log","hasClass","warn","addClass","n","templateParts","split","labelsArray","forEach","part","index","append","$part","find","rev","setFlipperDate","setInterval","upsizeToParent","window","on","flipTime","parentWidth","flipperWidth","maxFontSize","fontSize","minFontSize","css","innerWidth","each","w","parseFloat","outerWidth","dateString","animate","is","removeClass","a","d","t","now","Date","seconds","getSeconds","minutes","getMinutes","hours","getHours","days","getDate","remainder","parse","days_str","toString","hours_str","minutes_str","seconds_str","attr","removeAttr","$digit","value","html","remove","prepend","flipDigit","closest","setTimeout","$currentTop","$currentTop2","$currentBottom","$activeDigit","$firstDigit","$prevDigit","prev","$nextDigit","next","$lastDigit","$next","parseInt","hide","show"],"mappings":"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","file":"jquery.flipper-responsive.js","sourcesContent":["jQuery(function ($) {\n  // https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/String/repeat\n  if (!String.prototype.repeat) {\n    String.prototype.repeat = function (count) {\n      'use strict';\n\n      if (this == null) {\n        throw new TypeError('can\\'t convert ' + this + ' to object');\n      }\n\n      var str = '' + this;\n      count = +count;\n\n      if (count != count) {\n        count = 0;\n      }\n\n      if (count < 0) {\n        throw new RangeError('repeat count must be non-negative');\n      }\n\n      if (count == Infinity) {\n        throw new RangeError('repeat count must be less than infinity');\n      }\n\n      count = Math.floor(count);\n\n      if (str.length == 0 || count == 0) {\n        return '';\n      } // Обеспечение того, что count является 31-битным целым числом, позволяет нам значительно\n      // соптимизировать главную часть функции. Впрочем, большинство современных (на август\n      // 2014 года) браузеров не обрабатывают строки, длиннее 1 << 28 символов, так что:\n\n\n      if (str.length * count >= 1 << 28) {\n        throw new RangeError('repeat count must not overflow maximum string size');\n      }\n\n      var rpt = '';\n\n      for (var i = 0; i < count; i++) {\n        rpt += str;\n      }\n\n      return rpt;\n    };\n  } // https://github.com/uxitten/polyfill/blob/master/string.polyfill.js\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padStart\n\n\n  if (!String.prototype.padStart) {\n    String.prototype.padStart = function padStart(targetLength, padString) {\n      targetLength = targetLength >> 0; //truncate if number or convert non-number to 0;\n\n      padString = String(typeof padString !== 'undefined' ? padString : ' ');\n\n      if (this.length > targetLength) {\n        return String(this);\n      } else {\n        targetLength = targetLength - this.length;\n\n        if (targetLength > padString.length) {\n          padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed\n        }\n\n        return padString.slice(0, targetLength) + String(this);\n      }\n    };\n  }\n\n  $.fn.flipper = function (action, options) {\n    var $flipper = $(this);\n    var action = action || 'init';\n    var settings = $.extend({\n      // defaults.\n      reverse: $flipper.data('reverse') || false,\n      datetime: $flipper.data('datetime') || 'now',\n      template: $flipper.data('template') || 'HH:ii:ss',\n      labels: $flipper.data('labels') || 'Hours|Minutes|Seconds',\n      preload: true\n    }, options);\n    console.log(settings.reverse);\n\n    if (action === 'init') {\n      if ($flipper.hasClass('flipper-initialized')) {\n        console.warn('Flipper already initialized.');\n        return;\n      }\n\n      $flipper.addClass(\"flipper-initialized\");\n      var templateParts = settings.template.split('|');\n      var labelsArray = settings.labels.split('|');\n      var n;\n      templateParts.forEach(function (part, index) {\n        if (index > 0) {\n          $flipper.append('<div class=\"flipper-group flipper-delimiter\">:</div>');\n        }\n\n        $flipper.append('<div class=\"flipper-group flipper-' + part + '\"></div>');\n        var $part = $flipper.find('.flipper-group.flipper-' + part);\n\n        if (typeof labelsArray[index] !== 'undefined') {\n          $part.append('<label>' + labelsArray[index] + '</label>');\n        }\n\n        if (part === 'd' || part === 'H' || part === 'i' || part === 's') {\n          var rev = settings.reverse ? 'reverse' : '';\n          $part.append('<div class=\"flipper-digit ' + rev + '\"></div>');\n        }\n\n        if (part === 'dd' || part === 'ddd' || part === 'HH' || part === 'ii' || part === 'ss') {\n          var rev = settings.reverse ? 'reverse' : '';\n          $part.append('<div class=\"flipper-digit ' + rev + '\"></div>');\n          $part.append('<div class=\"flipper-delimiter\"></div>');\n          $part.append('<div class=\"flipper-digit ' + rev + '\"></div>');\n\n          if (part === 'ddd') {\n            $part.append('<div class=\"flipper-delimiter\"></div>');\n            $part.append('<div class=\"flipper-digit ' + rev + '\"></div>');\n          }\n        }\n\n        if (part === 'd') {\n          for (n = 0; n <= 31; n++) {\n            $part.find('.flipper-digit:eq(0)').append('<div class=\"digit-face\">' + n + '</div>');\n            $part.find('.flipper-digit:eq(1)').append('<div class=\"digit-face\">' + n + '</div>');\n          }\n        }\n\n        if (part === 'H') {\n          for (n = 0; n <= 23; n++) {\n            $part.find('.flipper-digit:eq(0)').append('<div class=\"digit-face\">' + n + '</div>');\n            $part.find('.flipper-digit:eq(1)').append('<div class=\"digit-face\">' + n + '</div>');\n          }\n        }\n\n        if (part === 'i' || part === 's') {\n          for (n = 0; n <= 59; n++) {\n            $part.find('.flipper-digit:eq(0)').append('<div class=\"digit-face\">' + n + '</div>');\n            $part.find('.flipper-digit:eq(1)').append('<div class=\"digit-face\">' + n + '</div>');\n          }\n        }\n\n        if (part === 'dd' || part === 'ddd') {\n          for (n = 0; n <= 9; n++) {\n            $part.find('.flipper-digit:eq(0)').append('<div class=\"digit-face\">' + n + '</div>');\n            $part.find('.flipper-digit:eq(1)').append('<div class=\"digit-face\">' + n + '</div>');\n\n            if (part === 'ddd') {\n              $part.find('.flipper-digit:eq(2)').append('<div class=\"digit-face\">' + n + '</div>');\n            }\n          }\n        }\n\n        if (part === 'HH') {\n          for (n = 0; n <= 2; n++) {\n            $part.find('.flipper-digit:eq(0)').append('<div class=\"digit-face\">' + n + '</div>');\n          }\n\n          for (n = 0; n <= 9; n++) {\n            $part.find('.flipper-digit:eq(1)').append('<div class=\"digit-face\">' + n + '</div>');\n          }\n        }\n\n        if (part === 'ii' || part === 'ss') {\n          for (n = 0; n <= 5; n++) {\n            $part.find('.flipper-digit:eq(0)').append('<div class=\"digit-face\">' + n + '</div>');\n          }\n\n          for (n = 0; n <= 9; n++) {\n            $part.find('.flipper-digit:eq(1)').append('<div class=\"digit-face\">' + n + '</div>');\n          }\n        }\n      });\n\n      if (settings.preload) {\n        setFlipperDate($flipper, settings.datetime, false);\n      }\n\n      setInterval(function () {\n        setFlipperDate($flipper, settings.datetime, true);\n      }, 1000);\n      upsizeToParent($flipper);\n      $(window).on(\"resize\", function () {\n        upsizeToParent($flipper);\n      });\n    }\n\n    var flipTime = 400;\n    var $body = $('body');\n\n    function flipDigit($digit) {\n      if (!$digit.closest('.flipper').is('.flipper-initialized')) {\n        return;\n      }\n\n      if ($digit.hasClass('r')) {\n        setTimeout(function () {\n          flipDigit($digit);\n        }, flipTime + 1);\n        return;\n      }\n\n      $digit.addClass('r');\n      var $currentTop = $digit.find('.digit-top');\n      var $currentTop2 = $digit.find('.digit-top2');\n      var $currentBottom = $digit.find('.digit-bottom');\n      var $activeDigit = $digit.find('.digit-face.active');\n      var $firstDigit = $digit.find('.digit-face:first');\n      var $prevDigit = $activeDigit.prev('.digit-face');\n      var $nextDigit = $activeDigit.next('.digit-face');\n      var $lastDigit = $digit.find('.digit-face:last');\n\n      if ($digit.hasClass('reverse')) {\n        var $next = $prevDigit.length ? $prevDigit : $lastDigit;\n      } else {\n        var $next = $nextDigit.length ? $nextDigit : $firstDigit;\n      }\n\n      var current = parseInt($currentTop.html());\n      var next = $next.html();\n      $digit.find('.digit-next').html(next);\n      $digit.find('.digit-face').removeClass('active');\n      $next.addClass('active');\n      $currentTop.addClass('r');\n      $currentTop2.addClass('r');\n      $currentBottom.addClass('r');\n\n      if (next.toString() === $digit.attr('data-value')) {\n        $digit.removeAttr('data-value');\n      }\n\n      setTimeout(function () {\n        $currentTop.html(next).hide();\n        $currentTop2.html(next);\n        setTimeout(function () {\n          $currentBottom.html(next).removeClass('r');\n          $currentTop.removeClass('r').show();\n          $currentTop2.html(next).removeClass('r');\n          $digit.removeClass('r');\n        }, flipTime / 2);\n      }, flipTime / 2);\n    }\n\n    function upsizeToParent($flipper) {\n      var parentWidth;\n      var flipperWidth;\n      var maxFontSize = 1000;\n      var fontSize = maxFontSize;\n      var i = 0;\n      var minFontSize = 0;\n      $flipper.css('font-size', fontSize + 'px');\n\n      while (i < 20) {\n        i++;\n        parentWidth = $flipper.innerWidth();\n        $flipper.css('width', '9999px');\n        flipperWidth = 0;\n        $flipper.find('.flipper-group').each(function () {\n          var w = parseFloat($(this).outerWidth());\n          flipperWidth += w;\n        });\n\n        if (parentWidth - flipperWidth < 10 && parentWidth - flipperWidth > 0) {\n          $flipper.css('width', '');\n          return;\n        }\n\n        if (flipperWidth > parentWidth) {\n          maxFontSize = fontSize < maxFontSize ? fontSize : maxFontSize;\n        } else {\n          minFontSize = fontSize > minFontSize ? fontSize : minFontSize;\n        }\n\n        fontSize = (maxFontSize + minFontSize) / 2;\n        $flipper.css('width', '');\n        $flipper.css('font-size', fontSize + 'px');\n      }\n    }\n\n    function setDigitValue(digitIndex, value) {\n      var $flipper = $('.flipper');\n      var $digit = $flipper.find('.flipper-digit:eq(' + digitIndex + ')');\n      var currentValue = getDigitValue($digit);\n\n      if (currentValue.toString() === value.toString()) {\n        return; // has same value, do nothing\n      }\n\n      $digit.attr('data-value', value);\n    }\n\n    setInterval(function () {\n      var $flipper = $('.flipper');\n      $flipper.find('.flipper-digit[data-value]').each(function () {\n        var $digit = $(this);\n\n        if ($digit.find('.active').html() === $digit.attr('data-value')) {\n          return; //\n        }\n\n        if (!$digit.is('.r')) {\n          flipDigit($digit);\n        }\n      });\n    }, flipTime / 4);\n\n    function formatFlipperDate(dateStr) {\n      var a = dateStr.split(\" \");\n      var d = a[0].split(\"-\");\n      var t = a[1].split(\":\");\n      var date = new Date(d[0], d[1] - 1, d[2], t[0], t[1], t[2]);\n      return date;\n    }\n\n    function addAppearance($flipper) {\n      $flipper.find('.flipper-digit').each(function () {\n        var $digit = $(this);\n        var value = $digit.find('.digit-face.active').html();\n        $digit.find('.digit-top').remove();\n        $digit.find('.digit-top2').remove();\n        $digit.find('.digit-bottom').remove();\n        $digit.find('.digit-next').remove();\n        $digit.prepend('<div class=\"digit-top\">' + value + '</div>');\n        $digit.prepend('<div class=\"digit-top2\">' + value + '</div>');\n        $digit.prepend('<div class=\"digit-bottom\">' + value + '</div>');\n        $digit.prepend('<div class=\"digit-next\"></div>');\n      });\n    }\n\n    function setFlipperDate($flipper, dateString, animate) {\n      var animate = animate || false;\n\n      if (!$flipper.is(':visible')) {\n        $flipper.addClass('flipper-invisible');\n        return;\n      }\n\n      if ($flipper.hasClass('flipper-invisible')) {\n        $flipper.removeClass('flipper-invisible');\n        upsizeToParent($flipper);\n        setFlipperDate($flipper, settings.datetime, false);\n      }\n\n      var now = Date.now();\n\n      if (dateString === 'now') {\n        var now = new Date();\n        var seconds = now.getSeconds();\n        var minutes = now.getMinutes();\n        var hours = now.getHours();\n        var days = now.getDate();\n      } else {\n        var timestamp = Date.parse(formatFlipperDate(dateString));\n        var remainder = (timestamp - now) / 1000;\n        var days = Math.floor(remainder / 60 / 60 / 24);\n        remainder -= days * 60 * 60 * 24;\n        var hours = Math.floor(remainder / 60 / 60);\n        remainder -= hours * 60 * 60;\n        var minutes = Math.floor(remainder / 60);\n        remainder -= minutes * 60;\n        var seconds = Math.floor(remainder);\n      }\n\n      var days_str = days.toString().padStart(3, '0');\n      var hours_str = hours.toString().padStart(2, '0');\n      var minutes_str = minutes.toString().padStart(2, '0');\n      var seconds_str = seconds.toString().padStart(2, '0');\n\n      if (animate) {\n        // one section\n        $flipper.find('.flipper-d').find('.flipper-digit:eq(0)').attr('data-value', days);\n        $flipper.find('.flipper-H').find('.flipper-digit:eq(0)').attr('data-value', hours);\n        $flipper.find('.flipper-i').find('.flipper-digit:eq(0)').attr('data-value', minutes);\n        $flipper.find('.flipper-s').find('.flipper-digit:eq(0)').attr('data-value', seconds); // two sections\n\n        $flipper.find('.flipper-dd').find('.flipper-digit:eq(0)').attr('data-value', days_str[1]);\n        $flipper.find('.flipper-dd').find('.flipper-digit:eq(1)').attr('data-value', days_str[2]);\n        $flipper.find('.flipper-HH').find('.flipper-digit:eq(0)').attr('data-value', hours_str[0]);\n        $flipper.find('.flipper-HH').find('.flipper-digit:eq(1)').attr('data-value', hours_str[1]);\n        $flipper.find('.flipper-ii').find('.flipper-digit:eq(0)').attr('data-value', minutes_str[0]);\n        $flipper.find('.flipper-ii').find('.flipper-digit:eq(1)').attr('data-value', minutes_str[1]);\n        $flipper.find('.flipper-ss').find('.flipper-digit:eq(0)').attr('data-value', seconds_str[0]);\n        $flipper.find('.flipper-ss').find('.flipper-digit:eq(1)').attr('data-value', seconds_str[1]); // three sections\n\n        $flipper.find('.flipper-ddd').find('.flipper-digit:eq(0)').attr('data-value', days_str[0]);\n        $flipper.find('.flipper-ddd').find('.flipper-digit:eq(1)').attr('data-value', days_str[1]);\n        $flipper.find('.flipper-ddd').find('.flipper-digit:eq(2)').attr('data-value', days_str[2]);\n      } else {\n        $flipper.find('.flipper-group .flipper-digit').removeAttr('data-value');\n        $flipper.find('.digit-face.active').removeClass('active'); // one section\n\n        $flipper.find('.flipper-d .flipper-digit:eq(0) .digit-face:contains(' + days + ')').addClass('active');\n        $flipper.find('.flipper-H .flipper-digit:eq(0) .digit-face:contains(' + hours + ')').addClass('active');\n        $flipper.find('.flipper-i .flipper-digit:eq(0) .digit-face:contains(' + minutes + ')').addClass('active');\n        $flipper.find('.flipper-s .flipper-digit:eq(0) .digit-face:contains(' + seconds + ')').addClass('active'); // two sections\n\n        $flipper.find('.flipper-dd .flipper-digit:eq(0) .digit-face:contains(' + days_str[1] + ')').addClass('active');\n        $flipper.find('.flipper-dd .flipper-digit:eq(1) .digit-face:contains(' + days_str[2] + ')').addClass('active');\n        $flipper.find('.flipper-HH .flipper-digit:eq(0) .digit-face:contains(' + hours_str[0] + ')').addClass('active');\n        $flipper.find('.flipper-HH .flipper-digit:eq(1) .digit-face:contains(' + hours_str[1] + ')').addClass('active');\n        $flipper.find('.flipper-ii .flipper-digit:eq(0) .digit-face:contains(' + minutes_str[0] + ')').addClass('active');\n        $flipper.find('.flipper-ii .flipper-digit:eq(1) .digit-face:contains(' + minutes_str[1] + ')').addClass('active');\n        $flipper.find('.flipper-ss .flipper-digit:eq(0) .digit-face:contains(' + seconds_str[0] + ')').addClass('active');\n        $flipper.find('.flipper-ss .flipper-digit:eq(1) .digit-face:contains(' + seconds_str[1] + ')').addClass('active'); // three sections\n\n        $flipper.find('.flipper-ddd .flipper-digit:eq(0) .digit-face:contains(' + days_str[0] + ')').addClass('active');\n        $flipper.find('.flipper-ddd .flipper-digit:eq(1) .digit-face:contains(' + days_str[1] + ')').addClass('active');\n        $flipper.find('.flipper-ddd .flipper-digit:eq(2) .digit-face:contains(' + days_str[2] + ')').addClass('active');\n        addAppearance($flipper);\n      }\n    }\n  };\n});"]}