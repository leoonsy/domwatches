{"version":3,"sources":["scripts/main.min.js"],"names":["isset","v","ChangeContainer","selector","size","$","window","params","error","push","key","addClass","removeClass","bootstrapGetErrors","errors","rus","AOS","init","once","on","e","this","toggleClass","stop","slideToggle","css","removeAttr","animate","scrollTop","hash","offset","top","$timer","preventDefault","currentDate","currentDay","addDay","resultDay","add","format","attr","fn","flipper","min","TouchSpin","max","step","hasClass","each","cost","parseInt","text","sumCost","val","find","html","resize","count","concat","length","method","$form","url","serialize","bootstrapBuyParams","done","join","modal","ajax","data","fail","submit","bootstrapFeedbackParams"],"mappings":"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","file":"main.min.js","sourcesContent":["$(() => {\r\n    //анимация блоков\r\n    if (isset(AOS)) {\r\n        AOS.init({\r\n            once: true\r\n        });\r\n    }\r\n\r\n    //функционал гамбургерного меню\r\n    $('.navbar__hamburger').on('click', function (e) {\r\n        $(this).toggleClass('is-active');\r\n        $('.navbar__top-menu').stop().slideToggle(800, function () {\r\n            if ($(this).css('display') === \"none\")\r\n                $(this).removeAttr('style');\r\n            else\r\n                $(this).css('display', 'flex');\r\n        });\r\n    });\r\n\r\n    //скролл при нажатии на кнопку \"Выбрать часы\"\r\n    $(\".top-info__buy\").on('click', function (e) {\r\n        var fixed_offset = 15;\r\n        $('html,body').stop().animate({\r\n            scrollTop: $(this.hash).offset().top - fixed_offset\r\n        }, 1000);\r\n        e.preventDefault();\r\n    });\r\n\r\n    //автоматическое изменение таймера\r\n    let $timer = $('.discount__timer');\r\n    if ($timer.length != 0) {\r\n        const discountDuration = 4; //длительность акции в днях\r\n        const currentDate = moment();\r\n        let currentDay = currentDate.format('DD');\r\n        const addDay = discountDuration - currentDay % discountDuration;\r\n        let resultDay = currentDate.add(addDay, 'days').format('YYYY-MM-DD 00:00:00');\r\n        $timer.attr('data-datetime', resultDay);\r\n    }\r\n\r\n    //инициализация таймера\r\n    if (isset($.fn.flipper))\r\n        $('#myFlipper').flipper('init');\r\n\r\n    //задание количества товаров\r\n    if (isset($.fn.TouchSpin)) {\r\n        $(\"input[name^='inputWatches']\").TouchSpin({\r\n            min: 0,\r\n            max: 100,\r\n            step: 1\r\n        });\r\n    }\r\n\r\n    //убрать красную рамку ошибок при наведении на input\r\n    $('.buy-form input, .contacts__form input').on('focus', function () {\r\n        if ($(this).hasClass('is-invalid'))\r\n            $(this).removeClass('is-invalid')\r\n    });\r\n\r\n    //подсчет стоимости всех товаров\r\n    $('.buy-goods__count-input').on('change', function () {\r\n        let sumCost = 0;\r\n        $('.buy-goods__item').each(function () {\r\n            let cost = parseInt($(this).find('.buy-goods__price-new').html());\r\n            let count = parseInt($(this).find('.buy-goods__count-input').val());\r\n            sumCost += cost * count;\r\n        });\r\n\r\n        $('.buy-goods__cost-number').text(`${sumCost}₽`);\r\n        $('#inputPrice').val(sumCost);\r\n    });\r\n\r\n    //изменение контенеров при определенной ширине экрана\r\n    ChangeContainer('#section-discount', 992);\r\n    $(window).resize((e) => {\r\n        ChangeContainer('#section-discount', 992);\r\n    });\r\n\r\n    //покупка товаров\r\n    $('.buy-form').submit(function (e) {\r\n        let $form = $(this);\r\n        let errors = bootstrapGetErrors(bootstrapBuyParams); //клиентская проверка на ошибки\r\n        if (errors.length != 0) {\r\n            $('#bootstrapModal .modal-title').html('<span class=\"text-danger\">Ошибка!</span>');\r\n            $('#bootstrapModal .modal-body').html(`Неверно заполнены поля: ${errors.join(', ')}.`);\r\n            $('#bootstrapModal').modal();\r\n        }\r\n        else {\r\n            $.ajax({\r\n                method: $form.attr('method'),\r\n                url: $form.attr('action'),\r\n                data: $form.serialize()\r\n            }).done((e) => {\r\n                if (e == 'success') {\r\n                    $('#bootstrapModal .modal-title').html('<span class=\"text-success\">Спасибо за заказ!</span>');\r\n                    $('#bootstrapModal .modal-body').html('Ваш заказ принят! В ближайшее время с Вами свяжется менеджер для подтверждения заказа!');\r\n                } else {\r\n                    $('#bootstrapModal .modal-title').html('<span class=\"text-danger\">Ошибка!</span>');\r\n                    $('#bootstrapModal .modal-body').html(e);\r\n                }\r\n                $('#bootstrapModal').modal();\r\n            }).fail(function () {\r\n                $('#bootstrapModal .modal-title').html('<span class=\"text-danger\">Ошибка!</span>');\r\n                $('#bootstrapModal .modal-body').html('Невозможно сделать заказ! Попробуйте снова!');\r\n                $('#bootstrapModal').modal();\r\n            });\r\n        }\r\n        //отмена действия по умолчанию для кнопки submit\r\n        e.preventDefault();\r\n    });\r\n\r\n    //обратная связь\r\n    $('.contacts__form').submit(function (e) {\r\n        let $form = $(this);\r\n        let errors = bootstrapGetErrors(bootstrapFeedbackParams); //клиентская проверка на ошибки\r\n        if (errors.length != 0) {\r\n            $('#bootstrapModal .modal-title').html('<span class=\"text-danger\">Ошибка!</span>');\r\n            $('#bootstrapModal .modal-body').html(`Неверно заполнены поля: ${errors.join(', ')}.`);\r\n            $('#bootstrapModal').modal();\r\n        }\r\n        else {\r\n            $.ajax({\r\n                method: $form.attr('method'),\r\n                url: $form.attr('action'),\r\n                data: $form.serialize()\r\n            }).done((e) => {\r\n                if (e == 'success') {\r\n                    $('#bootstrapModal .modal-title').html('<span class=\"text-success\">Сообщение отправлено</span>');\r\n                    $('#bootstrapModal .modal-body').html('Ваше сообщение отправлено службе технической поддержки. Ожидайте ответа на указанный email-адрес.');\r\n                } else {\r\n                    $('#bootstrapModal .modal-title').html('<span class=\"text-danger\">Ошибка!</span>');\r\n                    $('#bootstrapModal .modal-body').html(e);\r\n                }\r\n                $('#bootstrapModal').modal();\r\n            }).fail(function () {\r\n                $('#bootstrapModal .modal-title').html('<span class=\"text-danger\">Ошибка!</span>');\r\n                $('#bootstrapModal .modal-body').html('Невозможно отправить сообщение! Попробуйте снова!');\r\n                $('#bootstrapModal').modal();\r\n            });\r\n        }\r\n        //отмена действия по умолчанию для кнопки submit\r\n        e.preventDefault();\r\n    });\r\n});\r\n\r\nfunction isset(v) {\r\n    return typeof v !== 'undefined';\r\n}\r\n\r\n//изменить контейней на противоположный (bootstrap)\r\nfunction ChangeContainer(selector, size) {\r\n    if ($(window).width() < size)\r\n        $(selector + ' .container').removeClass(\"container\").addClass(\"container-fluid\");\r\n    else\r\n        $(selector + ' .container-fluid').removeClass(\"container-fluid\").addClass(\"container\");\r\n}\r\n\r\n//возвращает массив ошибок на русском языке для формы\r\nfunction bootstrapGetErrors(params) {\r\n    let errors = [];\r\n    for (let key in params)\r\n        if (params[key].error)\r\n            errors.push(params[key].rus);\r\n\r\n    return errors;\r\n}"]}