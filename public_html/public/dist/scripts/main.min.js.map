{"version":3,"sources":["scripts/main.min.js"],"names":["isset","v","bootstrapGetErrors","params","selector","push","$","window","width","size","removeClass","addClass","errors","key","error","rus","AOS","init","once","on","e","this","toggleClass","stop","slideToggle","css","removeAttr","animate","scrollTop","hash","offset","top","preventDefault","max","fn","flipper","step","TouchSpin","min","hasClass","count","parseInt","sumCost","cost","ChangeContainer","each","find","html","val","bootstrapBuyParams","resize","data","submit","serialize","done","length","concat","join","modal","ajax","method","$form","url","attr","fail","bootstrapFeedbackParams"],"mappings":"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","file":"main.min.js","sourcesContent":["$(() => {\r\n    //анимация блоков\r\n    if (isset(AOS)) {\r\n        AOS.init({\r\n            once: true\r\n        });\r\n    }\r\n\r\n    //функционал гамбургерного меню\r\n    $('.navbar__hamburger').on('click', function (e) {\r\n        $(this).toggleClass('is-active');\r\n        $('.navbar__top-menu').stop().slideToggle(800, function () {\r\n            if ($(this).css('display') === \"none\")\r\n                $(this).removeAttr('style');\r\n            else\r\n                $(this).css('display', 'flex');\r\n        });\r\n    });\r\n\r\n    //скролл при нажатии на кнопку \"Выбрать часы\"\r\n    $(\".top-info__buy\").on('click', function (e) {\r\n        var fixed_offset = 15;\r\n        $('html,body').stop().animate({\r\n            scrollTop: $(this.hash).offset().top - fixed_offset\r\n        }, 1000);\r\n        e.preventDefault();\r\n    });\r\n\r\n    //таймер\r\n    if (isset($.fn.flipper))\r\n        $('#myFlipper').flipper('init');\r\n\r\n    //задание количества товаров\r\n    if (isset($.fn.TouchSpin)) {\r\n        $(\"input[name^='inputWatches']\").TouchSpin({\r\n            min: 0,\r\n            max: 100,\r\n            step: 1\r\n        });\r\n    }\r\n\r\n    //убрать красную рамку ошибок при наведении на input\r\n    $('.buy-form input, .contacts__form input').on('focus', function () {\r\n        if ($(this).hasClass('is-invalid'))\r\n            $(this).removeClass('is-invalid')\r\n    });\r\n\r\n    //подсчет стоимости всех товаров\r\n    $('.buy-goods__count-input').on('change', function () {\r\n        let sumCost = 0;\r\n        $('.buy-goods__item').each(function () {\r\n            let cost = parseInt($(this).find('.buy-goods__price-new').html());\r\n            let count = parseInt($(this).find('.buy-goods__count-input').val());\r\n            sumCost += cost * count;\r\n        });\r\n\r\n        $('.buy-goods__cost-number').text(`${sumCost}₽`);\r\n    });\r\n\r\n    //изменение контенеров при определенной ширине экрана\r\n    ChangeContainer('#section-discount', 992);\r\n    $(window).resize((e) => {\r\n        ChangeContainer('#section-discount', 992);\r\n    });\r\n\r\n    //покупка товаров\r\n    $('.buy-form').submit(function (e) {\r\n        let $form = $(this);\r\n        let errors = bootstrapGetErrors(bootstrapBuyParams); //клиентская проверка на ошибки\r\n        if (errors.length != 0) {\r\n            $('#bootstrapModal .modal-title').html('<span class=\"text-danger\">Ошибка!</span>');\r\n            $('#bootstrapModal .modal-body').html(`Неверно заполнены поля: ${errors.join(', ')}.`);\r\n            $('#bootstrapModal').modal();\r\n        }\r\n        else {\r\n            $.ajax({\r\n                method: $form.attr('method'),\r\n                url: $form.attr('action'),\r\n                data: $form.serialize()\r\n            }).done((e) => {\r\n                if (e == 'success') {\r\n                    $('#bootstrapModal .modal-title').html('<span class=\"text-success\">Спасибо за заказ!</span>');\r\n                    $('#bootstrapModal .modal-body').html('Ваш заказ принят! В ближайшее время с Вами свяжется менеджер для подтверждения заказа!');\r\n                } else {\r\n                    $('#bootstrapModal .modal-title').html('<span class=\"text-danger\">Ошибка!</span>');\r\n                    $('#bootstrapModal .modal-body').html(e);\r\n                }\r\n                $('#bootstrapModal').modal();\r\n            }).fail(function () {\r\n                $('#bootstrapModal .modal-title').html('<span class=\"text-danger\">Ошибка!</span>');\r\n                $('#bootstrapModal .modal-body').html('Невозможно сделать заказ! Попробуйте снова!');\r\n                $('#bootstrapModal').modal();\r\n            });\r\n        }\r\n        //отмена действия по умолчанию для кнопки submit\r\n        e.preventDefault();\r\n    });\r\n\r\n    //обратная связь\r\n    $('.contacts__form').submit(function (e) {\r\n        let $form = $(this);\r\n        let errors = bootstrapGetErrors(bootstrapFeedbackParams); //клиентская проверка на ошибки\r\n        if (errors.length != 0) {\r\n            $('#bootstrapModal .modal-title').html('<span class=\"text-danger\">Ошибка!</span>');\r\n            $('#bootstrapModal .modal-body').html(`Неверно заполнены поля: ${errors.join(', ')}.`);\r\n            $('#bootstrapModal').modal();\r\n        }\r\n        else {\r\n            $.ajax({\r\n                method: $form.attr('method'),\r\n                url: $form.attr('action'),\r\n                data: $form.serialize()\r\n            }).done((e) => {\r\n                if (e == 'success') {\r\n                    $('#bootstrapModal .modal-title').html('<span class=\"text-success\">Сообщение отправлено</span>');\r\n                    $('#bootstrapModal .modal-body').html('Ваше сообщение отправлено службе технической поддержки. Ожидайте ответа на указанный email-адрес.');\r\n                } else {\r\n                    $('#bootstrapModal .modal-title').html('<span class=\"text-danger\">Ошибка!</span>');\r\n                    $('#bootstrapModal .modal-body').html(e);\r\n                }\r\n                $('#bootstrapModal').modal();\r\n            }).fail(function () {\r\n                $('#bootstrapModal .modal-title').html('<span class=\"text-danger\">Ошибка!</span>');\r\n                $('#bootstrapModal .modal-body').html('Невозможно отправить сообщение! Попробуйте снова!');\r\n                $('#bootstrapModal').modal();\r\n            });\r\n        }\r\n        //отмена действия по умолчанию для кнопки submit\r\n        e.preventDefault();\r\n    });\r\n});\r\n\r\nfunction isset(v) {\r\n    return typeof v !== 'undefined';\r\n}\r\n\r\n//изменить контейней на противоположный (bootstrap)\r\nfunction ChangeContainer(selector, size) {\r\n    if ($(window).width() < size)\r\n        $(selector + ' .container').removeClass(\"container\").addClass(\"container-fluid\");\r\n    else\r\n        $(selector + ' .container-fluid').removeClass(\"container-fluid\").addClass(\"container\");\r\n}\r\n\r\n//возвращает массив ошибок на русском языке для формы\r\nfunction bootstrapGetErrors(params) {\r\n    let errors = [];\r\n    for (let key in params)\r\n        if (params[key].error)\r\n            errors.push(params[key].rus);\r\n\r\n    return errors;\r\n}"]}